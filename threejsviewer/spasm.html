<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Bungie.net Spasm Library</title>
	<script src="https://code.jquery.com/jquery-3.2.1.min.js" type="text/javascript"></script>
	<script src="bnet-src/platformlib.js" type="text/javascript"></script>
	<script src="bnet-src/spasm.minified.js" type="text/javascript"></script>
	<script src="bnet-src/spasm_character.js" type="text/javascript"></script>
	<!--<script src="bnet-src/gearitemdetail.js" type="text/javascript"></script>-->
	<style>
		body {
			margin: 0;
			background: #ccc;
			overflow: hidden;
		}
		canvas {
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			width: 100%;
			height: 100%;
		}
	</style>
</head>
<body>
	<canvas id="canvas"></canvas>
	<script type="text/javascript">
		ServerVars = {};
		Bnet = {
			error: function(msg) {
				console.error(msg);
			}
		};
		bungieNetPlatform.apiKey = "{api-key}";
		bungieNetPlatform.destinyPlatform = '/d1/Platform/Destiny/';
		bungieNetPlatform.platformSettings.platformUrl = 'https://www.bungie.net/Platform';
		bungieNetPlatform.platformSettings.currentLocale = 'en';
		Spasm.Content.setContentBaseURL('https://www.bungie.net');
		console.log(Spasm.Content);
		var canvas = document.getElementById('canvas');
		window.addEventListener('resize', function(e) {
			update();
		});
		function update() {
			canvas.width = window.innerWidth;
			canvas.height = window.innerHeight;
		}
		update();

		// Character Preview
		//var spasmChar = new SpasmCharacter(2, "4611686018428939884", "2305843009221011538", canvas);
		//spasmChar.init();

		// Item Preview
		var itemPreview = new Spasm.ItemPreview(canvas, 'https://www.bungie.net');
		itemPreview.camera.userZoom(50);
		itemPreview.cameraControls.allowZoom = true;
		itemPreview.cameraControls.allowTranslation = true;
		itemPreview.loadItemReferenceIds(["3011919237"], 0, function(){
			itemPreview.setCenteredItemReferenceId("3011919237");
			itemPreview.startAnimating();
		});
	</script>
</body>
</html>